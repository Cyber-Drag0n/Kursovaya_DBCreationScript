# Курсовая работа по дисциплине «Технология разработки и защиты баз данных»<br>На тему «Справочник выпускников и тем дипломных работ студентов»

## Описание проекта

Проект представляет собой систему управления базой данных для учёта выпускников образовательного учреждения и их дипломных работ. База данных реализована на Microsoft SQL Server и включает в себя таблицы для хранения информации о пользователях, ролях, кафедрах, выпускниках, научных руководителях, навыках, наградах и дипломных работах, а также дополнительные представления (VIEW) для удобного получения аналитических данных.

---

## Структура репозитория

```text
├── README.md                          # Описание проекта и инструкции по использованию
├── UniversityDB(Creation script).txt  # Скрипт создания базы данных и всех объектов
└── Документы/ !(Пока в разработке)!
    └── Курсовая работа.docx           # Текст курсовой работы
```

---

## Требования

* Microsoft SQL Server (версия 2016 и выше)
* Microsoft SQL Server Management Studio (SSMS) или другой клиент для работы с SQL Server

---

## Развёртывание базы данных

1. Откройте SSMS и подключитесь к вашему экземпляру SQL Server.
2. Создайте новую базу данных:

   ```sql
   CREATE DATABASE UniversityDB;
   ```
3. Откройте файл `UniversityDB(Creation script).txt` и выполните весь скрипт для создания таблиц, представлений, ограничений и хранимых процедур.

---

## Управление пользователями и ролями

В проект была добавлена система разграничения доступа к базе данных с использованием ролей и пользователей SQL Server. Это позволяет управлять правами на чтение, изменение и выполнение процедур.

### Созданные пользователи:

* `user_editor` — пользователь с правами редактирования таблиц.
* `user_proc` — пользователь, которому разрешено выполнять хранимые процедуры.
* `user_schema_admin` — администратор схемы (может создавать и изменять объекты).
* `user_skill_award` — пользователь, управляющий навыками и наградами.
* `user_viewer` — пользователь с правами только на чтение.

### Назначенные роли:

* `db_editor` → `user_editor`
* `db_proc_executor` → `user_proc`
* `db_schema_admin` → `user_schema_admin`
* `db_skill_award_mgr` → `user_skill_award`
* `db_viewer` → `user_viewer`

> Это позволяет реализовать безопасное разделение прав между участниками проекта и обеспечивать контроль над действиями в базе данных.

---

## Описание таблиц и представлений

* **Users**: хранит данные пользователей (выпускники, научные руководители и администраторы).
* **Roles**: роли пользователей (Admin, Advisor, Graduate).
* **Departments**: список кафедр.
* **Graduates**: связь выпускников с кафедрами и пользователями.
* **ScientificAdvisors**: связь научных руководителей с кафедрами и пользователями.
* **DiplomaWorks**: дипломные работы, связывает выпускника и руководителя, содержит название и год.
* **Skills**, **GraduateSkills**: навыки и связь навыков с выпускниками.
* **Awards**: награды выпускников.

### Представления

* **View\_GraduatesWithDepartments**: список выпускников с названием кафедры.
* **View\_DiplomaWorksFullInfo**: полный список дипломных работ с именами выпускника и руководителя.
* **View\_GraduateSkills**: навыки каждого выпускника.
* **View\_GraduateAwardCount**: количество наград на выпускника.
* **View\_DiplomaCountByYear**: количество дипломных работ по годам.

## Хранимые процедуры

* **sp\_AddAward**(@GraduateId, @AwardName, @AwardYear): добавление награды.
* **sp\_GetDiplomaWorksByYear**(@Year): выборка дипломных работ за указанный год.
* **sp\_GetGraduatesBySkill**(@SkillName): выборка выпускников по навыку.
* **sp\_GetSkillsByGraduate**(@GraduateId): выборка навыков выпускника.
* **sp\_UpdateDiplomaTitle**(@DiplomaId, @NewTitle): обновление названия дипломной работы.

---

## Импорт и экспорт данных

Для работы с импортом/экспортом данных можно использовать встроенный мастер SSMS:

1. Выберите "Tasks → Import Data..." или "Tasks → Export Data..." на базе `UniversityDB`.
2. Следуйте шагам мастера, указывая источник/приемник.

---

## Примеры использования

```sql
-- Добавить новую награду
EXEC sp_AddAward @GraduateId = 1, @AwardName = 'Лучший выпускник', @AwardYear = 2024;

-- Получить дипломные работы за 2023 год
EXEC sp_GetDiplomaWorksByYear @Year = 2023;

-- Найти выпускников с навык 'SQL'
EXEC sp_GetGraduatesBySkill @SkillName = 'SQL';

-- Обновить название дипломной работы
EXEC sp_UpdateDiplomaTitle @DiplomaId = 5, @NewTitle = 'Новые методы оптимизации БД';
```

---

## Автор

**Нуруллин А.М.**<br>
Казанский национальный исследовательский технический университет — КАИ<br>
Группа 4235, «Колледж информационных технологий»
